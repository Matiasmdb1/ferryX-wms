{% extends "base.html" %}

{% block title %}Reporte de Stock Global{% endblock %}

{% block content %}
<div class="flex justify-between items-center mb-6">
  <h1 class="text-3xl font-bold text-gray-800">ðŸ“Š Reporte de Stock Global</h1>
</div>

<div class="bg-white p-6 rounded-lg shadow-md mb-8">
  <h2 class="text-xl font-semibold text-gray-800 mb-4">Stock Total Consolidado</h2>
  <div class="overflow-x-auto">
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-50">
        <tr>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Materia Prima</th>
          <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Stock Total</th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200">
        
        {% for item in stock_consolidado %}
          <tr class="hover:bg-gray-50">
            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{ item.mp__nombre }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 text-right font-mono">
              {{ item.stock_total|floatformat:1 }} {{ item.mp__unidad__nombre }}
            </td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="2" class="px-6 py-12 text-center text-gray-500 italic">No hay stock para mostrar.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<div class="bg-white p-6 rounded-lg shadow-md">
  <h2 class="text-xl font-semibold text-gray-800 mb-4">Stock Detallado por Bodega</h2>
  <div class="overflow-x-auto">
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-50">
        <tr>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Materia Prima</th>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Bodega</th>
          <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Stock en Bodega</th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200">

        {% for item in stock_por_sucursal %}
          <tr class="hover:bg-gray-50">
            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{ item.mp__nombre }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">{{ item.ubicacion__sucursal__nombre }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 text-right font-mono">
              {{ item.stock_total_sucursal|floatformat:1 }} {{ item.mp__unidad__nombre }}
            </td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="3" class="px-6 py-12 text-center text-gray-500 italic">No se encontrÃ³ stock en ninguna bodega.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}